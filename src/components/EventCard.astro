---
//@ts-nocheck
/*
curl 'https://ugqyjglpqvlnxrizrviv.supabase.co/rest/v1/Events?select=*' \
-H "apikey: SUPABASE_CLIENT_ANON_KEY" \
-H "Authorization: Bearer SUPABASE_CLIENT_ANON_KEY"
          */
import ButtonRound from "./ButtonRound.astro";
const { text, product } = Astro.props;

export async function getStaticPaths() {
  const { slug } = Astro.params;

  const fetchURL = `https://ugqyjglpqvlnxrizrviv.supabase.co/rest/v1/events=eq.${slug}&select=event_slug`;

  const response = await fetch(fetchURL, {
    headers: {
      apiKey:
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVncXlqZ2xwcXZsbnhyaXpydml2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcyOTY1MjgsImV4cCI6MjA2Mjg3MjUyOH0.o34_Vq2MYjWQWAExvv8dp2e5I5p6bE7UNxj3s36Boz0",
    },
  });

  const data = await response.json();

  return { props: { event: data[0] } };
}

/*
const url = "https://ugqyjglpqvlnxrizrviv.supabase.co/rest/v1/events";
const key =
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVncXlqZ2xwcXZsbnhyaXpydml2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcyOTY1MjgsImV4cCI6MjA2Mjg3MjUyOH0.o34_Vq2MYjWQWAExvv8dp2e5I5p6bE7UNxj3s36Boz0";

const options = { headers: { apikey: key } };
const data = await fetch(url, options).then((res) => res.json());

console.log(data);
*/
---

<a
  href={`/products/${product.event_slug}`}
  data-filter={`${product.event_type}`}
>
  <article>
    <div class="flex_box">
      <p>{product.event_date}</p>
      <ButtonRound text={product.event_type} variant="variant_1" />
    </div>
    <img src={`/img/${product.event_image}`} alt="placeholder" />
    <h3>{product.event_title}</h3>
    <p>
      {product.event_text}
    </p>
    <ButtonRound text="Read More" variant="variant_1" />
  </article>
</a>
<style>
  article {
    position: relative;
    display: grid;
    grid-template-rows: subgrid;
    grid-row: span 4;
    border: solid 1px var(--light-purple);
    padding: 2vh 4vh 2vh 4vh;
    gap: 1rem;
    height: 100%;
  }
  .flex_box {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  p {
    font-size: 0.8rem;
  }
  h3 {
    font-size: 1.5rem;
  }

  a {
    color: var(--dark-purple);
  }
  .hidden {
    display: none;
  }
</style>
